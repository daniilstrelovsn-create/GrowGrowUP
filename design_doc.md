Заготовка под диздок

# 0. Терминология

**Пользователь** - человек который играет в игру.

**Игрок** - персонаж пользователя.

**Инвентарь** - правая половина игрового экрана.

**Поле боя** - левая половина игрового экрана.

**Ячейка** - минимальная структурная единица в рюкзаке.

**Слот одежды** - слот в который можно поместить предмет, если он подходит для конректного слота. Форма при этом не важна.

**Рюкзак** - область состоящая из ячеек в левой нижней части экрана.

**Предмет** - игровая сущность, которую можно перетянуть и расположить в рюкзаке.

**Действие** - атака, использование предмета, использование окружения арены

# 1. Обобщённое описание геймплея

## 1.1 UI

Экран поделён на две части:
- Инвентарь
- Поле боя

На поле боя игрок сражается с противниками. Пользователь может выбирать кого именно сейчас атакует игрок, тыкая на конкретного противника.

Инвентарь состоит из трёх частей:

- resource-bars
- слоты одежды
- рюкзак

## 2. Gameflow

**Храбрость** - количество тактов страха, которые может выдержать противник перед тем как сбежать.

Игрок перемещается из локации в локацию, выбивая из противников предметы. Когда он убивает противников, у остальных с вероятностью ужас/100 повышается значение страха, когда у противника страх перевышивает храбрость+число союзников он сбегает и игрок перемещается в следующую локацию.

**Ужас** - одна из пассивных характеристик персонажа, чем вы страшнее тем быстрее сбегут противники
**Миролюбие** - отрицательная значение ужаса, уменьшающая шанс на то, что противники испугаются и сбегут.

Игрок может выбрать на какую локацию пойдёт дальше, если у него есть определённый предмет.

Каждый противник, имеет свой профиль потенциального лута, поэтому игрок вынужден выбирать между эффективной стратегией и выгодной. Ведь чел может убежать со своим лутом. Большая часть мощных предметов обладает значением ужаса, поэтому пользователю нужно аккуратно балансировать между предметами которые он может показывать.

Зачем носить предметы? Ради крафта!

DragNDrop не тратит действие.

# 3. Система предметов

Когда игрок убивает противника — из того может выпасть предмет. Этот предмет можно перетащить в рюкзак и расположить там.

Предмет может обладать свойствами 4-х типов.

- Пассивное свойство — работает когда предмет в рюкзаке или одет.
- Свойство при видимости - работает, когда предмет выглядывает из рюкзака или одет в слот одежды. Некоторые предметы становяться видимыми когда прменяют их активную способность или при выполнение скрытых условий.
- Свойство одежды - работает только когда предсет одет в слот одежды.
- Активное свойство - активируется при нажатие на предмет, когда он на поле боя или в рюкзаке.
- Скрытое свойство - активируется при выполнение определённых условий.

Каждый предмет занимает определённую область из ячеек. Если предмет полностью расположен в ячейках инвентаря, то он считается невидимым для противников, и свойства при видимости не работают.

Предмет может быть размещён в рюкзаке частично. Для этого больше половины ячеек предмета должны быть внутри рюкзака, а остальные должны быть вне рюкзака, предмет как бы торчит из рюкзака сверху, но тогда он видимый.

Предметы можно вращать.

Предмет можно поместить в подходящий ему слот одежды. При этом его форма не важна. Он занимает весь слот одежды.

Предмет можно выкинуть на поле боя, но он пропадёт при смене локации.

# 4. Боевая система

Мне лень над этим думать, в общем-то. Как будто в целом похуй. Чем проще, тем лучше.

Эффеты при ранение: УРОН > 1

вероятность попадания БЛИЖНИЙ БОЙ:   (ловкость атакующего - ловкость обороняющегося) %

вероятность попадания ДАЛЬНИЙ БОЙ: 2*(ловкость атакующего - ловкость обороняющегося) %

УРОН = АТАКА - БРОНЯ

КРИТ УРОН = АТАКА + 1

ЕСЛИ У ЗАЩИЩАЮЩЕГОСЯ ЕСТЬ ЩИТ
ШАНС БЛОКА блок+ловкость обороняющегося%
УРОН -> ЦЕЛОСТНОСТЬ ЩИТА

# 5. Вертикальный срез

Стартовая точка UI:
	LEFT PANEL
	ХП БАР
	БАРЫ???
	РАБОЧИЙ СЛОТ ДЛЯ ДОСПЕХОВ
	ОСТАЛЬНЫЕ СЛОТЫ ???
	СИЛА
	ЛОВКОСТЬ
	ОСТАЛЬНЫЕ СТАТЫ ???
	РЮКЗАК: Инвентарь DragNDrop 8х6 ячеек
	ВОЗМОЖНОСТЬ ВЫСУНУТЬ ПРЕДМЕТ???
	
	RIGHT PANEL
	ИГРОК
	ВРАГИ 3шт
	
Старт боя:
	Распределение очерёдности ходов ботов - Подсветка атакующего
	Игрок ходит первый:
		Выбирает цель - ХИТБОКС АНИМАЦИЯ - обработка атаки
	Подсетка Бот ходит второй:
		ХИТБОКС АНИМАЦИЯ - обработка атаки - подсветка следующего
	Смерть противника:
		Конец ХП ПРОТИВНИКА - ХИТБОКС АНИМАЦИЯ ПРЕДМЕТА -> Работа с инвентарём
	Смерть игрока:
		Сброс сцены - Возврат в главное меню (Перезапуск игры)

Конец боя ТОЛЬКО ПОБЕДА ИГРОКА:
	ПОКА НИЧЕГО
	
Работа с инвентарём:
	ВРАЩЕНИЕ ПРЕДМЕТОВ???
	Возможность активировать предмет:
		ДВОЙНОЙ КЛИК НА ПРЕДМЕТ -> Действие
	Возможность поместить предмет в инвентарь:
		DRAGNFROP в инвентарь -> Обработка пассивов
	Возможность одеть предмет:
		DRAGNFROP в персонажа -> Обработка пассивов

Обработка пассивов:
	В зависимости от того состояния, выполняем предназначение предмета


# 7. Идеи предметов

## Крышка бочки

Пахнет <капустой|берёзой|бренди>.

Целостность RND/<50|100|90>

Может быть одета в слот руки.
	Тогда становиться щитом.
	Блок 15+(целостность/5)
	Ужас < -1|0|0 >

Нельзя активировать

Скрытое:
	<_ | _ | пахнет дорогим алкоголем>


## <Ловкая> крыса

Мерзкое голодное создание.

Пасивное: 

	Раз в такт просыпается от голода и ищёт еду в соседних ячейках рюкзака, если не находит атакует случайного персонажа на поле боя и наносит ему 3 критического урона.

	Ловкость крысы <20>10

Если видима *ужас* +5

Нельзя одеть

Нельзя активировать

Скрытое:

	Если крыса ест из рюкзака с вероятностью (5-номер попытки)% она может стать ручной крысой.

## Ручная <ловкая> крыса

Мерзкое голодное создание.

Пасиивное: 

	Раз в такт просыпается и атакует случайного противника на поле боя и наносит ему 3 критического урона.

	Ловкость крысы <25>15

Если видима *ужас* +5

Нельзя одеть

Нельзя активировать

## Сыр

Еда, как говорят, особо любимая крысами.

Не портиться.
Целостность RND/1500

Нельзя одеть

Можно съесть

Скрытое: повышает шанс найти крысу, если в инвентаре.

## Яблоко

Еда. Если надкушено быстро портиться.

Свежесть RND/100(-1)
Целостность 100/100

Нельзя одеть

Можно съесть

Скрытое: Каждый такт свежесть снижается на 1, если целостность нарушена на 2.

## Мешок яблок 12/12

Содержит 12 яблок. Как они поместились в мешок и почему они в нём не портятся — большая загадка.

3x2 ячейки. Нельзя вращать.

Нет пассивных свойств.

Можно одеть вместо плаща. Ловкость -15 Ужас -10

При активации вы достанете яблоко.

Скрытое:

	Если ячейки 1 или 2 свободны мешок может упасть когда персонаж получит урон. Тогда яблоки из мешка сначала займут ряд 3 пока не дойдут до занятой ячейки, а потом ряд 4 пока не зайдут до занятой ячейки.

	OXXXOOOOO
	1XXX24444
	1XXX23333

	Если яблок осталось меньше 9, предмет становиться 2x2 и больше не может упасть.

	Если яблок осталось меньше 5, предмет становаить 1x2.

	Когда яблоки кончились остаётся пустой мешок.

## Пустой мешок

В него можно что-то насыпать, или что-то положить. Хороший мешок, крысе такой не прогрызть.

1x1

Нет пассивных свойств.

Можно одеть вместо плаща: Ужас -5
Можно одеть на голову: Ловкость -50

При активации, позволяет положить предмет в рюкзаке в мешок. Форма целевого предмета не меняется, но он становиться невидимым до активации. Активация предмета, сбрасывает мешок.

Скрытое: Предмет в мешке — уже не еда, поэтому крыса не будет обращать на него внимание.
